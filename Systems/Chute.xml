<?xml version="1.0"?>
<system name="Chute">
  <property value="0">systems/chute/chute-cmd-norm</property>

  <channel name="Chute Eject">
   <kinematic name="Chute Control">
     <input>systems/chute/chute-cmd-norm</input>
     <traverse>
       <setting>
          <position> 0 </position>
          <time>     0 </time>
       </setting>
       <setting>
          <position> 0.1 </position>
          <time>     0.9 </time>
       </setting>
       <setting>
          <position> 0.5 </position>
          <time>     0.3 </time>
       </setting>
       <setting>
          <position> 1 </position>
          <time>     0.3 </time>
       </setting>
     </traverse>
     <output>systems/chute/chute-reef-pos-norm</output>
   </kinematic>
  </channel>

  <channel name="Chute Deployed">
    <switch name="throttle-disable">
      <default value="/controls/engines/engine/throttle"/>
      <test value="0">
         systems/chute/chute-reef-pos-norm eq 1
      </test>
      <output>systems/throttle/throttle</output>
    </switch>
<!--
    <switch name="mass-location-falling">
      <default value="191.998"/>
      <test logic="AND" value="0">
         systems/chute/chute-reef-pos-norm eq 1
      </test>
      <output>/fdm/jsbsim/inertia/pointmass-weight-lbs[0]</output>
    </switch>
    <switch name="mass-location-gliding">
      <default value="0"/>
      <test logic="AND" value="191.998">
         systems/chute/chute-reef-pos-norm eq 1
      </test>
      <output>/fdm/jsbsim/inertia/pointmass-weight-lbs[1]</output>
    </switch>
-->
  </channel>

  <channel name="Pitch">
    <switch name="activate-elevator">
      <default value="0"/>
      <test value="fcs/elevator-cmd-norm">
          systems/chute/chute-reef-pos-norm EQ 1
      </test>
      <output>fcs/elevator-cmd-active</output>
    </switch>
    <aerosurface_scale name="Elevator Control">
      <input>fcs/elevator-cmd-active</input>
      <gain>0.2</gain>
      <range>
        <min>-25</min>
        <max>35</max>
      </range>
      <output>fcs/elevator-pos-rad</output>
    </aerosurface_scale>
  </channel>

  <channel name="Roll">
    <switch name="activate-aileron">
      <default value="0"/>
      <test value="fcs/aileron-cmd-norm">
          systems/chute/chute-reef-pos-norm EQ 1
      </test>
      <output>fcs/aileron-cmd-active</output>
    </switch>
    <aerosurface_scale name="Aileron Control">
      <input>fcs/aileron-cmd-active</input>
      <gain>0.2</gain>
      <range>
        <min>-20</min>
        <max>15</max>
      </range>
      <output>fcs/aileron-pos-rad</output>
    </aerosurface_scale>
  </channel>

</system>
